import geopandas as gpd
import sqlite3

# Read shapefile using Geopandas
shapefile = 'path_to_your_shapefile.shp'
gdf = gpd.read_file(shapefile)

# Convert geometry column to WKT format
gdf['geometry'] = gdf['geometry'].apply(lambda x: x.wkt)

# SQLite setup
db_name = 'mydatabase.db'
table_name = 'my_shapefile_data'
conn = sqlite3.connect(db_name)
cursor = conn.cursor()

# Create table - modify column types based on your shapefile data
create_table_sql = f'''
    CREATE TABLE IF NOT EXISTS {table_name} (
        id INTEGER PRIMARY KEY,
        geometry TEXT
        -- Add other columns here
    )'''
cursor.execute(create_table_sql)
conn.commit()

# Insert data into the table
for _, row in gdf.iterrows():
    insert_sql = f'''INSERT INTO {table_name} (geometry /*, other_columns*/) 
                     VALUES (?, /* other_values */)'''
    cursor.execute(insert_sql, (row['geometry'], /* other_values */))
conn.commit()

# Close the connection
conn.close()
