CREATE OR REPLACE FUNCTION workday(start_date DATE, num_days INTEGER)
RETURNS DATE AS $$
DECLARE
    current_date DATE := start_date;
    days_added INTEGER := 0;
BEGIN
    WHILE days_added < num_days LOOP
        current_date := current_date + 1;
        
        -- Check if it's a weekday
        IF EXTRACT(DOW FROM current_date) NOT IN (0, 6) THEN
            days_added := days_added + 1;
        END IF;
    END LOOP;
    
    RETURN current_date;
END;
$$ LANGUAGE plpgsql;
